# Объединение конфигурации gemini-client (.env и docker-compose)

**Status: DONE**

## Цель

Упорядочить и объединить конфигурацию `gemini-client` так, чтобы в репозитории остался ровно один общий `.env` и один общий `docker-compose.yml`, используемые для всего стека (включая `gemini-client`), без дублирующих локальных `.env` и compose‑файлов.

## Что нужно изменить

- Анализ текущей конфигурации:
  - Проанализировать, какие переменные окружения для всего приложения и `gemini-client` задаются в корневом `.env` (`.env`, `.env.example`) и какие — в любых других `.env` внутри репозитория (включая `gemini-client/.env`, если он есть).
  - Сопоставить различия между корневым `docker-compose.yml` (сервис `gemini-client` и остальной стек) и локальным `gemini-client/docker-compose.yml` (hysteria2 + gemini-client).
- Единый `.env`:
  - Определить полный набор переменных окружения, необходимых `gemini-client` (например, `OPENROUTER_API_KEYS`, `OPENROUTER_MODEL`, `HTTP_PROXY`, `LOG_LEVEL`, параметры RabbitMQ и др.).
  - Вынести все требуемые переменные в один общий корневой `.env` и его пример `.env.example`, убрать/удалить использование отдельных `.env` в поддиректориях (`gemini-client/.env` и т.п.).
  - Обновить все места в коде/compose‑файлах, чтобы они читали переменные только из общего `.env`.
- Единый `docker-compose.yml`:
  - Встроить необходимую конфигурацию для `gemini-client` (включая использование `hysteria2`, прокси и сети `day1_network`) в корневой `docker-compose.yml`.
  - Удалить или деактивировать `gemini-client/docker-compose.yml`, чтобы не было второго источника правды; при необходимости перенести его особенности (например, сервис `hysteria2`) в основной compose‑файл.
  - Убедиться, что все сценарии запуска (полный стек, dev‑режим, локальная отладка `gemini-client`) могут быть реализованы через один `docker-compose.yml` (возможно, с профилями/override‑файлами, но без второго основного compose).
- Документация:
  - Обновить `README.md` (корень и/или `gemini-client/README.md`), описав:
    - что в репозитории используется один общий `.env` и один общий `docker-compose.yml`;
    - откуда берутся переменные для `gemini-client` и как их настраивать;
    - как запускать полный стек и, при необходимости, только `gemini-client` через тот же compose.

## Критерии приёмки

- [x] В репозитории используется ровно один общий `.env` и один общий `docker-compose.yml`; все остальные `.env` и compose‑файлы либо удалены, либо явно помечены как неиспользуемые и не участвуют в обычном процессе запуска.
- [x] Все сервисы (backend, frontend, `gemini-client`, инфраструктура) читают конфигурацию только из общего `.env`.
- [x] Запуск стека через корневой `docker-compose.yml` корректно стартует `gemini-client` (включая `hysteria2`, если он нужен) с нужными переменными (`OPENROUTER_API_KEYS`, `OPENROUTER_MODEL`, прокси и др.).
- [x] Нет дублирования или конфликтующих настроек между разными compose‑файлами; единственным источником описания сервисов является корневой `docker-compose.yml` (плюс при необходимости override‑файлы, но не второй основной compose).
- [x] Документация по настройке и запуску `gemini-client` и всего стека обновлена и явно фиксирует требование «один `.env`, один `docker-compose.yml`».
