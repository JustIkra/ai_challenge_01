# ===========================================
# Day 1 Chat App - Environment Configuration
# ===========================================
# Copy this file to .env and fill in your values
#
# IMPORTANT: This is the ONLY .env file for the entire stack.
# All services (backend, frontend, gemini-client) read from this file.

# ===========================================
# Database Configuration
# ===========================================
DB_USER=chatapp
DB_PASSWORD=your_secure_password
DATABASE_URL=postgresql://chatapp:your_secure_password@postgres:5432/chatapp
# External port for PostgreSQL (change if 5432 is already in use)
POSTGRES_PORT=5432

# ===========================================
# Redis Configuration
# ===========================================
REDIS_URL=redis://redis:6379

# ===========================================
# RabbitMQ Configuration
# ===========================================
RABBITMQ_URL=amqp://rabbitmq:your_secure_password@rabbitmq:5672
RABBITMQ_USER=rabbitmq
RABBITMQ_PASSWORD=your_secure_password

# Queue names (used by backend and gemini-client)
REQUEST_QUEUE=gemini.requests
RESPONSE_QUEUE=gemini.responses

# ===========================================
# OpenRouter Configuration (for gemini-client)
# ===========================================
# Get your API key from https://openrouter.ai/keys
OPENROUTER_API_KEYS=your_openrouter_api_key
OPENROUTER_BASE_URL=https://openrouter.ai/api/v1
OPENROUTER_MODEL=google/gemini-2.5-flash

# Optional: For app attribution in OpenRouter dashboard
# OPENROUTER_SITE_URL=https://your-site.com
# OPENROUTER_SITE_NAME=Your App Name

# ===========================================
# Rate Limiting Configuration
# ===========================================
KEYS_MAX_PER_MINUTE=10
KEYS_COOLDOWN_SECONDS=60

# ===========================================
# Queue Retry Configuration
# ===========================================
# Escalating delays in seconds: 1min, 10min, 1hour, 24hours
QUEUE_RETRY_DELAYS=60,600,3600,86400
QUEUE_MAX_RETRIES=4

# ===========================================
# Logging Configuration
# ===========================================
LOG_LEVEL=INFO

# ===========================================
# Worker Configuration
# ===========================================
WORKER_PREFETCH_COUNT=10

# ===========================================
# Backend Settings
# ===========================================
CORS_ORIGINS=http://localhost:8089,http://localhost

# ===========================================
# RAG Server Configuration (for semantic search)
# ===========================================
# Database URL for MCP server (localhost since it runs on host)
RAG_DATABASE_URL=postgresql://chatapp:your_secure_password@localhost:5432/chatapp
# Local embedding model via @xenova/transformers (no API key needed)
# Options: Xenova/multilingual-e5-small (multilingual), Xenova/all-MiniLM-L6-v2 (English)
EMBEDDING_MODEL=Xenova/multilingual-e5-small
